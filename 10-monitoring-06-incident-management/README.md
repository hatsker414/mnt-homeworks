# Домашнее задание к занятию "10.06. Инцидент-менеджмент"

## Задание 1

Составьте постмотрем, на основе реального сбоя системы Github в 2018 году.

Информация о сбое доступна [в виде краткой выжимки на русском языке](https://habr.com/ru/post/427301/) , а
также [развёрнуто на английском языке](https://github.blog/2018-10-30-oct21-post-incident-analysis/).

> **Ответ:**    
>
> |       Постмортем            |       |
> |:--------------------------  |:----- |
> | Краткое описание инцидента  | 22 октября 2018 плановые работы по замене вышедшего из строя оптического оборудования 100G привели к потере связи между нашим сетевым концентратором на восточном побережье США и нашим основным центром обработки данных на восточном побережье США. Связь между этими точками была восстановлена за 43 секунды, но этот кратковременный сбой вызвал цепочку событий, которые привели к ухудшению качества обслуживания на 24 часа 11 минут |
> | Предшествующие события      | Проводились плановые работы по замене неисправного сетевого оборудования. |
> | Причина инцидента           | Ошибки в настройке Orchestrator позволившие провести выборы реплик MySQL между регионами. |
> | Воздействие                 | Произошло рассогласование данных между региональными кластерами MySQL. Что привело к появлению непоследовательной информации на веб-сайте. |
> | Обнаружение                 | Неполадки были зафиксированы системами мониторинга и замечены дежурными инженерами. |
> | Реакция                     | Дежурные инженеры присвоили проблеме желтый статус и оповестили координатора инцидентов, который присвоил проблеме красный статус и привлек к решению проблемы команду разработчиков баз данных и другие команды. Акцент был сделан на сохранности данных, а не на доступности сервисов. |
> | Восстановление              | Инженерами были временно заблокированы внутренние инструменты развертывания, чтобы предотвратить внесение каких-либо дополнительных изменений. Выработан и осуществлен план действий по восстановлению данных кластеров из бэкапов и репликации данных между ними. |
> | Таймлайн                    | 22:52 работы по замене сетевого оборудования. |
> |								| 22:54 внутренние системы мониторинга начали генерировать предупреждения, указывающие на многочисленные сбои в системах. |
> | 					        | 23:07 команда решила вручную заблокировать внутренний инструмент развертывания, чтобы предотвратить внесение каких-либо дополнительных изменений. |
> | 					        | 23:09 Команда присвоила сайте желтый статус|
> | 					        | 23:11 Подключился координатор ициндента и через 2 минуты присвоил красный статус. |
> | 					        | 23:13 вызваны дополнительные инженеры из группы разработки баз данных GitHub. |
> | 					        | 23:19 приостановлено выполнение заданий, пишущих метаданные (push-запросы). Принято решение о приоритете предпочтение целостности данных, а не удобству использования сайта и времени восстановления. |
> | 					        | 00:05 разработка плана устранения неисправностей с помощью восстановления данных из бэкапа с последующим реплицированнием по кластерам. |
> | 					        | 00:41 начато восстановление из бэкапа по всем затронутым кластерам. |
> | 					        | 06:51 завершение восстановления из бэкапа нескольких кластеров и начало репликации. Уточнение нагрузки и расчетного времени восстановления. |
> | 					        | 07:46 публикация сообщения о проблеме в блоге GitHub . |
> | 					        | 11:12 Все первичные базы данных снова установлены на восточном побережье США |
> | 					        | 13:15 начали предоставлять дополнительные реплики для чтения MySQL в общедоступном облаке. Как только они стали доступны, стало проще распределять объем запросов на чтение по большему количеству серверов. |
> | 					        | 16:24 окончание синхронизации реплик. Переход на исходную топологию. Начало обработки накопившихся данных Статус все еще красный. |
> | 					        | 16:45 балансировка возросшей нагрузки. Увеличение внутреннего TTL для накопившихся данных. |
> | 					        | 23:03 обработаны все незавершенные сборки веб-приложений и страниц, подтверждена целостность и корректность работы всех систем. Статус сайта обновлен до зеленого. |
> | Последующие действия        | Далее проводилась работа по согласованию 954 записей сделанных во время сбоя. |
> | 					        | По итогам: |
> | 					        | - произведена правильная настройка Orchestrator; |
> | 					        | - ускорен переход на новый механизм отчетности о состоянии компонетов системы для пользователей; |
> | 					        | - проработка инициативы по поддержке обслуживания трафика GitHub из нескольких центров обработки данных в активном/активном/активном режиме. Для поддержки резервирования на уровне N+1. Это позволит переносить полный отказ одного сбоя центра обработки данных без воздействия на пользователя. |

## Задача повышенной сложности

Прослушайте [симуляцию аудиозаписи о инциденте](https://youtu.be/vw6I5DYWkNA?t=1), предоставленную 
разработчиками инструмента для автоматизации инцидент-менеджмента PagerDuty.

На основании этой аудиозаписи попробуйте составить сообщения для пользователей о данном инциденте.

Должно быть 3 сообщения о:
- начале инцидента
- продолжающихся работах
- окончании инцидента и возвращении к штатной работе

---

### Как оформить ДЗ?

Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.

---
